You are a senior full-stack engineer. Socrates shows real KB stats on the Socrates page (e.g., Total Learnings = 220), but the Socrates card on Mission Control is blank. Fix this by enforcing the canonical crew identity + KPI pipeline for Socrates.

Goal
Mission Control must display Socrates’ primary KPI using the canonical identity system: crewId="socrates" and a primary KPI sourced from the same data as the Socrates page.

Non-negotiables

* No placeholder KPI for Socrates when real data exists.
* Mission Control must not read Socrates data from a separate code path.
* Socrates page and Mission Control must share the same canonical “crew overview” model.

Steps

1. Set Socrates primary KPI in crew registry
   In shared/crew/crewRegistry.ts:

* crewId: "socrates"
* primaryKpi:

  * id: "totalLearnings"
  * label: "Total Learnings"
  * unit: "count"

2. Add a Socrates KPI normalization step
   Create server/crew/normalize/socrates.ts (or equivalent):

* Fetch Socrates KB stats from the same source the Socrates page uses (likely the KB worker or KB API proxy).
* Produce a CrewKpi row:
  { crewId:"socrates", kpiId:"totalLearnings", value:<totalLearnings>, unit:"count", measuredAt: now }
  Optionally also emit:

  * kpiId:"insightsCount" value:<insights>
  * kpiId:"activeAgents" value:<activeAgents>

3. Persist Socrates KPIs into crew_kpis
   In POST /api/crew/:crewId/run (or the Socrates “collect learnings” action handler):

* When crewId === "socrates":

  * call normalizeSocrates()
  * insert returned KPI rows into crew_kpis with siteId + runId
    If Socrates doesn’t use the run pipeline yet:
* Add a lightweight endpoint:
  POST /api/crew/socrates/refresh
  that normalizes + stores the KPI rows.
  Then wire Mission Control to call this refresh when needed (or trigger on existing Socrates task completion).

4. Update /api/crew/socrates/overview
   Ensure GET /api/crew/:crewId/overview returns:

* primaryKpi = latest crew_kpis where kpiId === "totalLearnings"
* plus status, trend, tasks count (existing pattern)

5. Update Mission Control capabilities grid
   Ensure the Socrates card is rendered from /api/crew/socrates/overview just like every other crew:

* Display the primary KPI value (220)
* Label “Total Learnings”
* Use Socrates color styling
* If no KPI exists, show “—” + “Run diagnostics” (but this should not happen if KB has data)

Verification

* Visit Socrates page: confirm Total Learnings shows 220
* Visit Mission Control: Socrates card must show 220 and “Total Learnings”
* Confirm there is no duplicate Socrates-only query path in Mission Control

Deliverables

* File paths changed
* The exact KPI id used (“totalLearnings”)
* Proof Socrates card on Mission Control now shows the real number
