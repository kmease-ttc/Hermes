You are a senior full-stack engineer working inside this Replit project.

Problem
On the Integrations page, Socrates (Knowledge Base) shows as SUCCESS / READY and “Smoke: 4/4 outputs” (so the worker is validated). But on the Mission Control page, the Socrates section at the bottom still shows “Not Connected / Needs Config” (or similar). This is a UI/data mismatch.

Goal
Make Mission Control reflect the real integration status for Socrates, using the same source-of-truth logic as the Integrations page. After this fix, if Socrates is validated and outputs are ready, Mission Control must show it as connected/ready and remove the “configure” empty state.

Constraints

* Do NOT change the Socrates worker. It’s already working.
* Fix the app logic: status calculation, wiring, environment keys, or data fetching.
* Keep the change consistent with the patterns already used by the Integrations page.

Step-by-step

1. Identify what Mission Control is using to decide Socrates is “not connected”

* Locate the Mission Control page component and the specific widget/card for Socrates.
* Find the boolean/condition that triggers “Not Connected / Needs Config”.
* Log the inputs used for that condition (integration status object, secrets presence, base URL, outputs, etc.).

2. Identify what the Integrations page uses as source of truth

* Locate Integrations page component and the data model it renders (the list with status, missing outputs, smoke results).
* Find where it fetches data (endpoint + hook).
* Identify the field(s) that represent “connected/ready” for Socrates:

  * e.g., status=success AND readiness=ready AND outputsValidated=true
  * or outputs.count == expectedOutputs
  * or missingOutputs==0

3. Unify Mission Control to use the same integration status payload
   Preferred fix:

* Extract a shared hook/service:

  * client/src/hooks/useIntegrationsStatus.ts (or similar)
* Both Integrations and Mission Control should call the same hook and read the same normalized model.

4. Fix the specific mismatch for Socrates
   Common causes to check (verify which one is true, don’t guess):
   A) Mission Control is checking for a secret key name that doesn’t match what’s configured

* Example: it expects SEO_KBASE_API_KEY but actual secret is SEO_KBASE_API_KEY / SEO_KBASE_WRITE_KEY (or vice versa)
* Ensure Mission Control uses the same key names/requirements as the Integrations page.

B) Mission Control is checking a BASE_URL env var that differs from Integrations

* Integrations may be using SEO_KBASE_BASE_URL while Mission Control uses something else.
* Normalize: Socrates integration status should not rely on base URL presence if validation already passed.

C) Mission Control uses stale cached data or never fetches integration status

* Add a fetch on load or reuse the existing query.
* If using react-query: ensure query keys match, and invalidate/refetch after smoke test.

D) Mission Control is hardcoded to “not connected” because integration wiring isn’t implemented for Socrates

* Replace hardcoded placeholder with real data.

5. Update Mission Control’s Socrates card UI states

* If Socrates is READY (same condition as Integrations):

  * Show Connected/Ready state
  * Show a “Review Socrates” link (optional)
  * Remove “Configure integrations” CTA
* If not ready:

  * Show missing outputs count and the configure CTA.

6. Verification checklist

* Run app locally
* Go to Integrations: confirm Socrates shows success/ready
* Go to Mission Control:

  * Socrates card shows ready/connected
  * No “Not Connected” empty state
* If you re-run smoke tests, Mission Control updates without a hard reload.

Deliverables

* File paths changed
* The exact mismatch found (e.g., wrong secret key name, wrong status field, stale cache)
* The new shared status logic (briefly: what fields decide “ready”)
