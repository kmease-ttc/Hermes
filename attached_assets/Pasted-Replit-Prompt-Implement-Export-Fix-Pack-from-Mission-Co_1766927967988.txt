Replit Prompt: Implement “Export Fix Pack” from Mission Control (copy/pasteable Replit prompt)

Goal
The Mission Control page has an Export button but no real export feature. Implement an export workflow that produces a single “Fix Pack” document the user can copy/paste into Replit to apply recommended changes safely and consistently.

Core concept
Export = a structured, copy/pasteable “Implementation Prompt” + report that consolidates:

* Top Recommendations (priority actions)
* Supporting evidence (key metrics + agent findings)
* Specific proposed changes (scoped, safe)
* Guardrails (don’t over-change the site; limit content volume; follow best practices)
* Acceptance criteria
* Optional file-level change list (when known)

Where it lives
Mission Control page:

* Export button becomes a real feature:

  * “Export Fix Pack”
  * “Export Full Report” (optional)

UX requirements

1. Clicking Export opens a modal (or right-side drawer) with:

   * Export type selector:
     A) “Replit Fix Pack (Recommended)” (default)
     B) “Executive Report (PDF/MD)” (optional later)
   * Scope selector:

     * “This week’s priorities (Top 3)”
     * “Include blockers + all agent next steps”
   * Safety slider / settings:

     * “Max blog posts to publish: [1–3] (default 1)”
     * “Max technical changes: [1–5] (default 3)”
     * “Do not change design/UI (default ON)”
   * Button: “Generate Export”
2. After generation, show:

   * Large textarea with the export text
   * “Copy to clipboard”
   * “Download .md”
   * “Download .txt”
3. The export must be stable and deterministic for the same snapshot.

Data sources (single source of truth)
Use the canonical DB snapshots, not live calls:

* metric_snapshots (for numbers + deltas)
* latest agent_insights (what I found + next steps)
* recommendations (priority actions + impact/effort + sources)
* blockers (missing credentials / misconfig)

Backend: Create an export endpoint
Implement:

* GET /api/export/fix-pack?site_id=...&scope=top3|full&maxBlogs=1&maxTech=3&noUi=true

The endpoint returns:
{
title: "Mission Control Fix Pack",
generated_at: ISO,
site: { domain, site_id },
content_md: string,   // markdown export
content_txt: string   // plain text export (optional)
}

Export format (Replit Fix Pack) — Markdown
The output must be a single document with these sections:

1. Title + Snapshot

* Mission Control Fix Pack — {domain}
* Generated: timestamp
* Data freshness: “based on {as_of} snapshots”
* Active agents: X / Y
* Confidence: Low/Medium/High

2. What changed (Key Metrics Summary)
   For each key metric:

* Metric name
* Current value (window)
* Delta (abs + %)
* Verdict (Good/Watch/Bad)
* One-line interpretation

Example:
Traffic (Sessions, last 7d): 7,242 (−50% WoW) — BAD
Likely indexing/ranking issue; prioritize crawl/index checks.

3. Top Priorities (Top 3 Recommendations)
   For each:

* Priority # + Title
* Why it matters (1–2 lines)
* Evidence (metrics + agent findings)
* Proposed actions (bulleted, minimal)
* Owners (agent sources)

4. Blockers (if any)

* What’s blocked
* Exact fix step
* Link to the integration/settings page in the app (if available)

5. Implementation Instructions (THIS IS THE COPY/PASTE PROMPT)
   Write this section as a direct instruction to Replit to implement changes safely.
   Include:

* Constraints (do not over-change; max blog count; max tech changes; no UI changes)
* Required files/areas to inspect
* Step-by-step tasks, in priority order
* Acceptance criteria for each step
* “Do not proceed without tests passing” where applicable

6. Guardrails / Best Practices (Safety)
   Hard rules:

* Do not publish more than {maxBlogs} blog posts this run.
* Do not change more than {maxTech} technical items this run.
* Prefer small reversible changes.
* Avoid broad refactors.
* Only change what is clearly supported by the evidence.

7. Appendix (Agent Details)
   For each contributing agent:

* What I found (top 3)
* Next steps (1–3)
* Last checked timestamp

Mission Control integration

* Replace the existing Export button behavior:

  * If Export currently downloads something trivial, keep it as “Export (CSV)” and add a second button “Export Fix Pack”
  * Or change Export dropdown to:

    * Export Fix Pack (Replit)
    * Export Full Report (MD)

Acceptance criteria

* User clicks Export → selects “Replit Fix Pack” → generates text → copies to clipboard
* The export includes:

  * Metrics with deltas and verdicts
  * Top priorities + evidence
  * Clear scoped implementation instructions
  * Guardrails (max changes, max blogs)
  * Blockers list if applicable
* The export uses DB snapshots (consistent numbers across UI)
* Output is formatted well in Markdown and readable in plain text
