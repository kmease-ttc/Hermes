Step 1 – Project / Repo Structure For Arclo

Goal
Separate the marketing site from the application/worker so the app can stay lightweight while all “heavy” SEO logic runs in background services.

High-level structure
Use a single Git repo with three top-level apps (or three separate Repls if easier):
	•	/marketing-site – static marketing site (existing)
	•	/app – control panel + public API endpoints
	•	/worker – background job runner (stub only in Step 1)

If you prefer separate repos, keep the same names and assumptions below; just adjust paths.

⸻

	1.	Create/clean up the folders

⸻

	1.	Move all existing marketing code into /marketing-site.
	2.	Create two new folders at repo root:
	•	/app
	•	/worker
	3.	Add a simple README at root explaining each folder and how to run them.

Example structure:
	•	/marketing-site
	•	src/…
	•	package.json
	•	/app
	•	src/…
	•	package.json
	•	/worker
	•	src/…
	•	package.json
	•	README.md

⸻

	2.	Tech stack decisions

⸻

Assume:
	•	Marketing site: keep whatever stack it’s already using (likely React/Next).
	•	App: Node.js + Express (or Fastify) with TypeScript.
	•	Worker: Node.js + TypeScript (simple script, no framework needed yet).

If you prefer a different backend stack, keep the separation and interfaces the same:
	•	/app exposes HTTP API endpoints under /api/*.
	•	/worker is a process that will later read jobs from a DB/queue; in Step 1 it only has a stub.

⸻

	3.	Env + URL conventions

⸻

Add the following environment variables (for Replit or .env):

For marketing-site:
	•	APP_BASE_URL – base URL of /app service (e.g. https://app.arclo.dev in staging).
This will be used for the “Generate My Website” form POST.

For app:
	•	PORT – port to run the API (default 4000).
	•	APP_PUBLIC_URL – full base URL of the app (e.g. https://app.arclo.dev).
	•	MARKETING_BASE_URL – base URL of the marketing site (e.g. https://arclo.dev).

For worker:
	•	APP_DB_URL – will point to the same DB the app uses (placeholder for now).
	•	LOG_LEVEL – basic logging config.

⸻

	4.	Minimal stubs in each project

⸻

Marketing site (/marketing-site)
	1.	Keep existing pages as-is.
	2.	On the “Generate My Website” CTA, ensure the button or form can POST to a configurable URL:
	•	Endpoint: POST ${APP_BASE_URL}/api/intake
	•	For Step 1, this can be a simple fetch with hard-coded mock payload or a form with these fields:
	•	businessName
	•	email
	•	city
	•	niche
	3.	For now, ignore the response; just show a “Thanks, we’re generating your site” message.

App (/app)
	1.	Create a minimal Express server with:
	•	GET /health → returns { status: "ok" }.
	•	POST /api/intake → logs the request body and returns { ok: true }.
	•	No DB, no auth yet.
	2.	Configure CORS to accept requests from MARKETING_BASE_URL.
	3.	Add basic scripts to package.json:
	•	"dev": "ts-node-dev src/index.ts"
	•	"start": "node dist/index.js" (if using a build step)

Worker (/worker)
	1.	Create a minimal script with:
	•	A process entry (src/index.ts) that just logs “Worker started” and exits, or runs a simple interval loop logging a heartbeat.
	•	This will be replaced later with a real job runner.
	2.	Add basic scripts:
	•	"dev": "ts-node-dev src/index.ts"

⸻

	5.	Local/staging run instructions

⸻

Add to README.md:
	1.	Start app first (runs on http://localhost:4000):
	•	cd app && npm install && npm run dev
	2.	Start marketing-site (runs on http://localhost:3000 or whatever its dev port is).
	•	Ensure APP_BASE_URL=http://localhost:4000 in its .env.
	3.	Open the marketing site, click “Generate My Website”, and confirm:
	•	The browser sends POST /api/intake to localhost:4000.
	•	The app logs the payload and returns { ok: true }.
	•	The marketing site shows the thank-you message.
	4.	Start the worker in another terminal just to verify it runs:
	•	cd worker && npm install && npm run dev
	•	Confirm it prints “Worker started” every X seconds (or similar).

⸻

	6.	Acceptance criteria for Step 1

⸻

	•	Marketing site code is isolated in /marketing-site.
	•	There is a separate /app project exposing:
	•	GET /health
	•	POST /api/intake (logging payload, returning { ok: true }).
	•	There is a /worker project with a running stub process.
	•	Clicking “Generate My Website” on the marketing site in dev hits /api/intake on the app service using APP_BASE_URL.
	•	All three projects can be started independently with a single npm run dev command in their respective folders.