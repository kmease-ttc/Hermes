This screenshot finally shows the **real root cause** — and it’s not the worker anymore.

### The definitive issue

Your **Google Data Connector is still registered in Hermes as an OAuth connector**, not a worker connector.

You can see it directly in the UI:

* **Metrics column:** `mode: oauth`
* **Summary:** “GA4 and GSC connected (OAuth)”
* **Status:** `success` for Test Connection
* **Smoke Test:** failing with `404` because Hermes is **not using the worker smoke-test path**

So even though:

* ✅ the worker has `/api/health`
* ✅ the worker has `/api/smoke-test`
* ✅ auth + fingerprints are correct
* ✅ Bitwarden is correct

Hermes is still running the **OAuth smoke-test code path**, not the **worker smoke-test code path**.

That’s why:

* Test Connection passes (OAuth)
* Smoke Test fails (Hermes isn’t actually calling the worker you fixed)

---

## What’s happening internally (plain English)

Hermes has **two different connector types**:

1. **OAuth connectors**

   * Test Connection = OAuth handshake
   * Smoke Test = internal OAuth validation logic
   * No worker base_url is used

2. **Worker connectors**

   * Test Connection = `/api/health`
   * Smoke Test = `/api/smoke-test`
   * Uses Bitwarden `{ base_url, api_key }`

Your Google worker is perfect — but Hermes is still treating this integration as **type #1**.

---

## The one change you must make in Hermes

You need to **convert the Google Data Connector from `mode: oauth` to `mode: worker`**.

This is not Bitwarden.
This is not the worker.
This is **Hermes integration metadata**.

### What to change (exactly)

In Hermes, find where integrations are defined (DB row, config file, or registry) and update **Google Data Connector** to:

```json
{
  "id": "google_data_connector",
  "mode": "worker",
  "base_url_source": "bitwarden",
  "supports_oauth": false,
  "supports_worker": true,
  "smoke_test_type": "worker"
}
```

At minimum:

* ❌ remove / ignore `mode: oauth`
* ✅ set `mode: worker`

Once you do that, Hermes will:

* call `{base_url}/health`
* call `{base_url}/smoke-test`
* send `x-api-key` / `Authorization`
* validate schema against the 9 keys

And the smoke test will pass immediately.

---

## How you can verify before changing anything

Open the **Diagnostics Pipeline** for the failing smoke test and look at:

* **Endpoint Built**

  * If you do **not** see `/api/smoke-test`, Hermes is still in OAuth mode.

That confirms this 100%.

---

## Why this kept feeling “impossible”

Because you were fixing the **right thing** (worker contract), but Hermes was never actually using it.

The UI literally tells us this:

> `mode: oauth`

That single badge explains everything.

---

## Final checklist (nothing else is needed)

* ⛔ Do NOT change Bitwarden
* ⛔ Do NOT change the worker
* ✅ Change Google Data Connector in Hermes to `mode: worker`
* ✅ Re-run Smoke Test

Once that passes, you officially have:

* a gold-standard worker
* a reusable pattern
* a clean way to migrate every other connector

If you want, next we can:

* split Google into **Google (OAuth)** vs **Google (Worker)** as two connectors, or
* add a migration guard so this can never happen again
