Add a “Website Setup” (Settings) flow that connects each website to the services Hermes needs to read data + run fixes. Support 3 connection methods: GitHub, WordPress plugin, Replit direct. No dead ends: every missing prerequisite has a CTA and inline prompts.

1. Where this lives in the product

* Global nav: Settings → Websites
* Each website has its own Setup page:

  * /settings/websites
  * /settings/websites/:websiteId

2. Website model (DB)
   Table: websites

* id (uuid)
* name
* domain (required)
* environment: "prod" | "staging" | "dev"
* deploy_method: "github" | "wordpress" | "replit" | "unknown"
* status: "active" | "setup_required" | "error" | "disabled"
* created_at, updated_at

Table: website_integrations

* id (uuid)
* website_id (fk)
* integration: "github" | "wordpress" | "replit" | "ga4" | "gsc" | "clarity" | "ads" | "core_web_vitals" | "crawler" | etc
* status: "connected" | "needs_setup" | "needs_permissions" | "invalid" | "error" | "disabled"
* config_json (non-sensitive)
* secret_refs (array of secret keys / env var names)
* last_ok_at
* last_error

3. Setup UI (Websites list)
   For each website row/card show:

* Domain + environment
* Deployment method (badge)
* Connection health summary:

  * “Deploy connected” / “Deploy not connected”
  * “Analytics connected” (GA4/GSC/etc) count
  * “Workers ready” count
* Primary CTA based on status:

  * “Finish setup” (if anything missing)
  * “View settings” (if healthy)

4. Setup UI (Website detail)
   Sections (with statuses + CTAs)
   A) Deployment Connection (required to run updates)
   Choose one method:
5. GitHub
6. WordPress
7. Replit

B) Data Integrations (optional but recommended)

* GA4
* Google Search Console
* Microsoft Clarity
* Google Ads (if Draper is enabled)
* Core Web Vitals (Speedster)
* Crawler/Render service (Lookout)
  Each integration card:
* Status pill (Connected / Needs setup / Error)
* “Connect” / “Fix” / “Test connection” buttons
* Inline fields if missing (no dead ends)

C) Worker Coverage (what features can run)
Show each crew and its requirements:

* Speedster requires: Core Web Vitals + Domain
* Hemingway requires: Site content source (GitHub/WordPress/Replit) + crawler if needed
* Popular requires: GA4 + GSC (for click corroboration) etc
  Each crew row:
* “Ready” or “Blocked”
* If blocked: “Fix setup” CTA that jumps to the missing integration section, highlighting required fields.

5. Deployment methods: required config + actions
   A) GitHub method (recommended for code-based sites)
   Required config:

* Repo URL (owner/name)
* Branch (default main)
* Deploy strategy: "PR" | "direct_push" | "create_patch_file"
* Auth: GitHub App installation or PAT (prefer GitHub App)
  Actions:
* Connect GitHub (OAuth / App install)
* Select repo + branch
* Test write access
* Run “Dry-run change” (creates a no-op PR) to confirm pipeline
  No-dead-ends prompts:
* If auth missing → “Connect GitHub” CTA
* If repo not selected → repo picker CTA
* If permissions insufficient → “Grant permissions” CTA + show required scopes

B) WordPress plugin method (for WP sites)
Required config:

* WP Site URL
* Plugin token/API key issued by the plugin
* Optional: staging endpoint
  Actions:
* “Download/Install plugin” (link)
* “Generate token” instructions + field to paste token
* Test connection
* Verify write: create draft post / update a test page
  No-dead-ends prompts:
* If plugin not installed → show step-by-step + “I installed it” checkbox to re-test
* If token invalid → “Regenerate token” CTA

C) Replit direct method (for sites hosted in Replit)
Required config:

* Replit app URL (or repl id)
* Deploy target: “Replit Autoscale” vs “Dev”
* Auth method:

  * Prefer: service-to-service API key in Secrets
  * If available: Replit Deployments API integration
    Actions:
* Connect Replit (if API integration exists) OR
* “Add secret” CTA that tells Kevin exactly which secret name/value is required and where to paste it
* Test connection
* Dry-run change (writes a file change on a branch or via a patch endpoint depending on implementation)

6. “No dead ends” enforcement on the Settings flow
   Every missing piece must render:

* A human-readable message: “Popular can’t validate traffic drops because GA4 isn’t connected.”
* A primary CTA: “Connect GA4”
* Inline fields when possible:

  * GA4_PROPERTY_ID
  * GSC_SITE
  * CLARITY_PROJECT_ID
* A “Test connection” button after saving
* A “View last error” expandable section

7. API endpoints to implement
   Websites

* GET /api/settings/websites
* POST /api/settings/websites  (create)
* GET /api/settings/websites/:id
* PATCH /api/settings/websites/:id

Integrations

* GET /api/settings/websites/:id/integrations
* POST /api/settings/websites/:id/integrations/:integration/connect
* POST /api/settings/websites/:id/integrations/:integration/test
* PATCH /api/settings/websites/:id/integrations/:integration/config

Crew readiness

* GET /api/settings/websites/:id/readiness
  Returns:
* crews: [{ name, status, blocked_by: [integration], actions: [...] }]

8. Extra deployment methods (only if/when needed)
   If we discover new real-world deployment patterns, add them as additional deploy_method options:

* Cloudflare Pages (common for static sites)
* Vercel / Netlify (common for Next.js/static)
* Shopify (for ecom; would require app integration)
  We won’t add these until a real site needs them; the spec supports expanding deploy_method later.

9. Acceptance criteria

* You can add a new website and complete setup via GitHub OR WordPress OR Replit.
* Every integration card has a working CTA path: Connect/Fix/Test.
* No “Invalid date”, “Not configured”, or blank widgets anywhere—missing setup always routes back to this Settings flow.
* Popular/Speedster/Hemingway can all query their prerequisites and show exactly what’s missing with a deep link into the right Settings subsection.
