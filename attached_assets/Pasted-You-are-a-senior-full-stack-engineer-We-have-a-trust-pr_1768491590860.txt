You are a senior full-stack engineer. We have a trust problem: sample/placeholder/demo values appear in multiple parts of the platform (including the Analyzer) without being clearly marked. This makes it impossible to tell what is real vs simulated.

Goal
Any time the UI displays data that is not real (sample / placeholder / demo / mocked / estimated), it must be explicitly labeled **Sample**. This must be consistent across the entire platform.

Non-negotiables

* If it’s not sourced from the canonical pipeline (DB-backed crew_runs/crew_kpis/crew_findings or live verified integrations), it must be labeled Sample.
* “Sample” labeling must be highly visible and standardized.
* The Analyzer must never show un-labeled placeholder values.

---

## 1) Define a single “data provenance” contract

Create a shared type that travels with every metric/finding displayed:

`shared/types/provenance.ts`

* provenance: "real" | "sample" | "placeholder" | "estimated" | "unknown"
* provenanceReason?: string (optional)

Rules:

* real = derived from verified sources (DB runs or live verified integration responses)
* sample = intentionally provided preview (teaser) values
* placeholder = fake defaults used when nothing exists yet (should be avoided, but if present must be labeled)
* estimated = computed approximation
* unknown = fallback state (must render as Sample)

---

## 2) Enforce provenance at the API layer (preferred)

Update all API responses that power UI (Mission Control, Analyzer report, crew overview, key metrics, etc.) so each KPI/finding includes provenance:

Example KPI shape:
{
crewId,
kpiId,
value,
label,
unit,
measuredAt,
provenance: "real" | "sample" | ...
}

For any endpoint that currently returns a number without provenance:

* If the value is not backed by a DB run or verified integration, set provenance="sample" or "placeholder".

---

## 3) Create a single UI component for the Sample label

Create a shared component and use it everywhere:

`client/src/components/ui/ProvenanceBadge.tsx`

Behavior:

* If provenance !== "real", render a pill badge:

  * text: "Sample"
  * optional tooltip: reason (e.g., “Preview value — enable Popular to fetch real analytics”)

Design requirements:

* Small pill in the top-right of cards (same placement as existing “Sample” in some KPI cards)
* Visible but not noisy
* Always consistent styling (no per-page variants)

Mapping:

* sample/placeholder/estimated/unknown → show “Sample”
* real → show nothing

---

## 4) Add a global rule: any KPI card must render provenance

Update your shared metric card(s):

* KeyMetricCard
* CapabilityCard KPI widget
* Any analyzer KPI widgets

So they automatically render: <ProvenanceBadge provenance={kpi.provenance} />

No page should implement this ad-hoc.

---

## 5) Analyzer-specific fix (must)

Search the Analyzer/report pages for hardcoded numbers and placeholder objects.
For any value that is not real:

* Either remove it and show “—” with “Run diagnostics”
* Or keep it but mark provenance="sample" so the badge appears

Hard rule:

* Analyzer cannot show numbers without provenance.
  If provenance missing, treat as sample and badge it.

---

## 6) Add a test to prevent regressions

Add a test that fails if any rendered KPI/finding lacks provenance:

Server test:

* For report endpoints:

  * assert every KPI includes provenance
  * assert any KPI not backed by DB has provenance != "real"

Client test (lightweight):

* Render a KPI card without provenance -> it must show “Sample”
* Render a real KPI -> no badge

---

## 7) Acceptance checklist

Before finishing, verify:

* Mission Control: any sample KPI shows “Sample”
* Capabilities & Performance: locked/preview KPIs show “Sample”
* Analyzer report: any placeholder numbers show “Sample”
* Crew dashboards: if they show sample values (rare), they are labeled
* No unlabeled fake values remain anywhere

If a user can’t tell what’s real vs sample in 3 seconds, the work is not done.

---

Deliverables

* Provenance type added and used in all relevant APIs
* ProvenanceBadge component created and used in shared UI cards
* Analyzer placeholders labeled
* Tests added to enforce provenance everywhere
