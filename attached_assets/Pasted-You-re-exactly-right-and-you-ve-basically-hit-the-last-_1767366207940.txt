You’re exactly right, and you’ve basically hit the **last architectural inconsistency** on Natasha.

What’s happening right now is:

* **Lookout** is the *truth* for keyword-level data (ranks, counts, distributions).
* **Natasha** is partially recomputing similar concepts using **competitive snapshot data**, which:

  * Has a different keyword universe
  * Has a different aggregation window
  * Is competitor-relative, not market-relative

That’s why:

* Position distribution ≠ Lookout (19 vs 26)
* “Visibility vs Tracked Competitors” graph is flat/useless
* Share of Voice feels duplicated/confusing

So the fix is **not cosmetic** — it’s a **data unification decision**.

---

## The correct model (clear + scalable)

### Single source of truth

* **Lookout = canonical keyword + ranking engine**
* Natasha **consumes Lookout-derived aggregates**, not recomputed ones

Competitive data should *augment*, not redefine, core metrics.

---

## What to change (decisions first)

### 1) Merge “Share of Voice” tab into Overview

Yes — do this.

* **Overview becomes the home for SOV**
* Remove the standalone **Share of Voice** tab entirely
* Keep the explanation + charts, but inline them into Overview sections

Result:

* Fewer tabs
* Less cognitive switching
* Metrics + explanation live together

---

### 2) Redefine the graph: “Visibility vs Tracked Competitors”

Right now it’s useless because:

* Tracked SOV is often 0
* The chart has no variation

**Fix:**

* Use **Market SOV** as the primary series
* Overlay competitors *only if data exists*

New behavior:

* Primary line/bar: **Your Market SOV (from Lookout)**
* Secondary lines (optional): competitor visibility *where available*
* If competitor data is sparse → show only Market SOV

This makes the graph *always informative*.

---

### 3) Unify Position Distribution (this is critical)

This is the bug you spotted.

> Natasha says 19 in ranks 2–3
> Lookout says 26

That should **never happen**.

**Decision:**

* **Position Distribution on Natasha must be derived from Lookout keyword data**
* Competitive snapshot should not compute rank buckets

Canonical buckets:

* Top 1
* 2–3
* 4–10
* 11–20
* 21–50
* Not ranking

Same logic. Same counts. Everywhere.

---

## The fix, expressed as a clean Replit prompt

You can hand this directly to the agent:

---

You are a senior full-stack architect working in the Hermes SEO / Arclo codebase.

Task
Unify **Share of Voice**, **Visibility**, and **Position Distribution** on Natasha’s page so they use a single source of truth (Lookout keyword rankings), and remove redundant UI.

Decisions (do not reinterpret)

* Lookout is the canonical source for:

  * keyword list
  * ranks
  * rank buckets
  * Market SOV
* Natasha must consume Lookout-derived aggregates instead of recomputing them.

Changes to implement

1. Remove the standalone “Share of Voice” tab

* Delete the Share of Voice tab entirely.
* Move its explanatory content and charts into the **Overview** tab.
* Overview should contain:

  * Market SOV
  * Tracked SOV
  * Visibility / distribution charts

2. Fix “Visibility vs Tracked Competitors” chart

* Replace the primary series with **Market SOV over time** (from Lookout).
* Only overlay competitor visibility if competitive data exists.
* If competitor data is empty or flat, show Market SOV alone.
* Never render a chart that is all zeros.

3. Unify Position Distribution logic

* Remove any position-bucketing logic derived from competitive snapshot data.
* Derive all position buckets from the same Lookout keyword list used on the Lookout page.
* Buckets must exactly match Lookout:

  * Top 1
  * 2–3
  * 4–10
  * 11–20
  * 21–50
  * Not ranking
* Natasha’s counts must match Lookout counts exactly.

4. Centralize aggregation

* Create (or use) a shared selector/helper, e.g.:
  `getKeywordAggregatesFromLookout(keywords)`
* This helper should return:

  * marketSovPct
  * positionDistribution
  * counts (ranking / not ranking / top buckets)
* Use this helper in:

  * Lookout
  * Natasha (Overview + charts)

Acceptance criteria

* Position distribution numbers match Lookout exactly.
* Market SOV is the primary, always-meaningful visibility metric.
* No duplicate or conflicting SOV concepts.
* Removing the Share of Voice tab does not remove insight.
* Charts never render flat or zero-only data unless truly warranted.

Commit message
`refactor(natasha): unify SOV and position distribution using Lookout as source of truth`

---

## Why this is the right endpoint

After this change:

* Lookout = **tactical execution**
* Natasha = **strategic interpretation**
* Metrics line up everywhere
* No more “why does this say X but that says Y?”
* You can confidently expand trends, alerts, and reporting

If you want, next we can:

* Add **SERP competitor discovery** directly into Natasha
* Or design a **weekly executive summary** view that pulls from the same unified data

But architecturally — this is the correct cleanup.
