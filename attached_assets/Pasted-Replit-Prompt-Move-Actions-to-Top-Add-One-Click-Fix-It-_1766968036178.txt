Replit Prompt: Move “Actions” to Top + Add One-Click “Fix It” Button (Knowledge Base → Change Worker → GitHub PR)

Goal
On the Speedster (Core Web Vitals) detail page, the Actions section is too low. Move the primary actions up near the top (ideally inside the “Core Web Vitals Overview” panel), and add a new primary CTA that can automatically create code fixes via the Change Worker and push them to GitHub.

UI Changes

1. Relocate Actions to the top

* Move the “Actions” block (Run Vitals Scan, Export Fix Pack) from the bottom to the top of the page.
* Best placement: inside the “Core Web Vitals Overview” card, aligned top-right or below the header/subtitle.
* Keep the glass design consistent.
* Preserve existing buttons, but update styling to match the current button system.

2. Add a new primary action button: “Fix It”
   Add a prominent CTA next to Export:

* Button label options:

  * “Fix It”
  * “Address Issues”
  * “Create Fix PR”
    Pick one and standardize across the app (prefer “Create Fix PR” for clarity).
* This button triggers an automated workflow:

  1. Call Knowledge Base to determine recommended fixes for the current issues
  2. Call Change Worker (GitHub PR workflow) to implement fixes and open a PR
  3. Return a PR link + summary of changes in the UI

Behavior / Workflow

3. Implement a single backend orchestration endpoint
   Add endpoint:
   POST /api/fix/core-web-vitals
   Body:
   {
   siteId,
   pageContext: "speedster",
   issues: {
   lcp: 6.71,
   cls: null,
   inp: null,
   performanceScore: 65,
   opportunities: [...] // if available
   }
   }

Server flow:
A) Gather evidence

* Pull latest Speedster metrics + any PSI/Lighthouse opportunities already stored
* Attach “top affected URLs” if available
* Attach benchmark thresholds and current status (good/needs work/poor)

B) Generate fix plan using Knowledge Base worker

* Call SEO_KBASE_BASE_URL (or the knowledge base service) with:

  * issue summary
  * evidence
  * constraints (safe changes max, style rules, etc.)
* Receive back a structured fix plan:

  * recommended file-level edits (e.g., optimize images, defer JS, remove unused CSS, add caching headers)
  * prioritized checklist
  * safe change count estimate

C) Execute fix plan via Change Worker (GitHub integration)

* Call Site Change Executor / Deployer worker that creates a GitHub PR:

  * Provide fix plan + repo target + branch naming conventions
  * Ensure it runs in “safe mode” (max N changes per cycle)
* Worker returns:

  * prUrl
  * branchName
  * list of files changed
  * diff summary
  * status (created/failed) + error details

D) Persist result

* Store fix attempt in audit log:

  * siteId, crewId=speedster, runId, prUrl, summary, createdAt, status

4. Frontend UX for “Fix It”

* On click:

  * show loading state: “Analyzing issues…” → “Generating fix plan…” → “Creating PR…”
* On success:

  * show a success panel with:

    * PR link button (“Open Pull Request”)
    * short summary of fixes
    * files changed count
* On failure:

  * show error code/message/hint (no silent failure)
  * offer retry

Safety / Guardrails

5. Add safety controls in the modal before creating PR (recommended)
   When user clicks “Fix It”, open a small confirmation modal:

* “Max changes this cycle” (default 5–20)
* “Create PR only” (no auto-merge)
* Tooltip: “Recommended to keep changes small to reduce ranking volatility.”

6. Ensure the workflow respects existing secrets/config

* Requires GitHub integration configured in Change Worker
* Requires Knowledge Base keys configured
  If missing, show “Blocked” and list exactly what’s needed.

Acceptance Criteria

* Actions appear near top of Speedster page inside/near Core Web Vitals Overview.
* New “Fix It / Create Fix PR” button exists and is styled as a primary CTA.
* Clicking it creates a real workflow: KB plan → Change Worker PR → returns PR URL.
* User can choose Export (manual path) OR Fix It (automated path).
* All states and errors are visible and actionable.
